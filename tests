# variables
# ---------
#  $jag_tipdf   .. jag_tipdf command
#  $txt         .. a text input
#  $img         .. an image input
#
# directives
# ----------
#  @fail        .. the test is expected to fail
#  @req_convert .. run only if imagemagick is present
#  @rea_pil     .. run only if PIL is present

$jag_tipdf $txt > output/lipsum.pdf
$jag_tipdf --margins=10,10,10,10 $txt > output/margins.pdf
$jag_tipdf input/pseudocz_fvar.txt > output/filevar.pdf
$jag_tipdf --encoding=iso-8859-2 input/pseudocz.txt > output/iso8859_2.pdf

$jag_tipdf --page=Letter $txt --page=A4 $txt --page=700,400 $txt --page=700,1400 $txt > output/pages.pdf
$jag_tipdf --bookmark=%basename $txt --bookmark=%filestem $txt --bookmark=%path $txt --bookmark=%basename $img > output/bookmarks.pdf
$jag_tipdf --page-color=777777 $txt --page-color=8822ff $txt > output/pagecolor.pdf
$jag_tipdf $img --separator=0 $img --separator=72 $img --separator=break $txt > output/separator.pdf
$jag_tipdf --shell="echo %path" $txt > output/shell.pdf

# images - PIL & imagemagick
$jag_tipdf $img > output/logo.pdf
@req_convert $jag_tipdf --force-imagemagick input/logo.tiff > output/logotiff.pdf
@req_pil $jag_tipdf --force-pil input/logo.ppm > output/logoppm.pdf

# --input-type
@fail $jag_tipdf input/lipsum_no_image.png > $dev_nul
$jag_tipdf --input-type=text input/lipsum_no_image.png > output/lipsum_explicit_text.pdf
$jag_tipdf --input-type=image input/logo.txt > output/logo_explicit_image.pdf
cat $img | $jag_tipdf --input-type=image > output/logo_stdin.pdf -

